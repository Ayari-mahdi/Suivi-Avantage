<div class="container">


<!--LOADING CONTAINER-->
  <div *ngIf="spin"  class="container loader-container1" >
    <div *ngIf="spin" class="loading">
      <span>Loading...</span>
    </div>  
    <div *ngIf="spin"  class="container loader-container">
    </div>
    </div>
<!--END OF LOADING CONTAINER-->


<div class="row">
  <div class="col-md-12">
    <div class="card my-5">
      <div class="card-body" >
            
        <mat-drawer-container >
<!-- SEARCH DRAWER -->
        <mat-drawer #drawer mode="push" style="background: #34495e;width: 350px;height: 400px;top: 0%;border-radius: 10px;" >
          <form (ngSubmit)="onSubmit()"  #userForm="ngForm">  
          <div class="form-group" style="width: 250px;margin-top: 30px;">
            <label for="bureau"></label>
             <select  type="text" [(ngModel)]="data.BUR_COD" 
               class="form-control" 
               id="bureau" 
               name="bureau"   
               required       
               #bur_cod="ngModel">
               <ng-container *ngFor="let burcod of brcod">
               <option value="{{burcod.bur_cod}}">{{ burcod.bur_cod}} : {{ burcod.bur_intit}}</option>
               </ng-container>
               </select>     
          </div>    
          <div class="form-group">
            <label for="cin"></label>
            <input type="text" [(ngModel)]="data.CIN" 
              class="form-control" 
              id="cin" 
              name="cin" 
              placeholder="CIN:"
              required
              #cin="ngModel"> 
          </div>
          <div class="form-group">
            <label for="numero_affiliation"></label>
            <input type="text" [(ngModel)]="data.NUMERO_AFFILIATION" 
              class="form-control" 
              id="numero_affiliation" 
              name="numero_affiliation" 
              placeholder="NUM AFFILIATION:"
              required
               #numero_affiliation="ngModel">
          </div>
          <div class="form-group">
            <label for="typeavantage"></label>
             <select type="text" [(ngModel)]="data.TYPE_CONTRAT" 
              class="form-control" 
              id="typeavantage" 
              name="typeavantage"      
              required    
              #typeavantage="ngModel">
              <option >KARAMA</option>
             <!--  <ng-container *ngFor="let burcod of brcod">
               <option value="{{burcod.bur_cod}}">{{ burcod.bur_cod}}</option>
              </ng-container>-->
              </select>
          </div>
            <button type="submit"  [disabled]="!userForm.form.valid"  class="btn btn-info">search <i class="fa fa-search" aria-hidden="true"></i>
            </button>
          </form>    
        </mat-drawer>
 <!-- END OF SEARCH DRAWER-->

      
     <!-- <div *ngIf="search_icon">  
        <a (click)="drawer.open()"><i class="fa fa-search" aria-hidden="true"></i> </a>
      </div>-->

  <!-- LINK TO TRIGGER THE DRAWER-->
      <a  (click)="drawer.open()"><i style="cursor: pointer;" class="fa fa-search" aria-hidden="true"></i> </a>
  <!---->
    
<br>
<br>

    <table class="table  table-striped">
      <thead class="thead "  >
        <tr>
          
          
          <th  scope="col">#CIN</th>
          <th  scope="col">Nom Prenom</th>             
          <th scope="col">Bureau</th>
          <th  scope="col">Date Import</th>
          <th  scope="col">Numero d'affiliation</th>
          <th  scope="col">Type Contrat</th>
          <ng-container *ngIf="!ano; then nrmllist" >
          </ng-container>
          <ng-template #nrmllist>
          <th  scope="col">Employeur Existant</th>
          <th  scope="col">Assuree Existant</th>     
        </ng-template>
       
        

        <!--  <th scope="col">Action </th>      -->
        </tr>
      </thead>

      <tbody>     
          <tr  *ngFor="let karama  of karama_list ">
            <ng-container *ngIf="!ano; then nrmllist1; else anolist2" >
            </ng-container>
            <ng-template #nrmllist1>         
          <td>{{ karama.cin }}</td>
          <td>{{ karama.nom_prenom }}</td>       
          <td>{{ karama.bur_cod }}</td>
          <td>{{ karama.date }}</td>
          <td>{{ karama.numero_affiliation }}</td>
          <td>{{ karama.type_contrat}}</td>

            <ng-container *ngIf="karama.emp_exist === 1; then check1; else cross1">
            </ng-container>

            <ng-container *ngIf="karama.ass_exist === 1; then check2; else cross2">
            </ng-container>
          
            <ng-template #check1>
            <td> <span class="check"> &#10004; </span> </td>
            </ng-template>

            <ng-template #cross1>
            <td> <span class="cross"> &#10060; </span> </td>         
            </ng-template>   

            <ng-template #check2>
            <td> <span class="check"> &#10004; </span> </td>
            </ng-template>

            <ng-template #cross2>
            <td><span class="cross"> &#10060; </span> </td>
            </ng-template>
            </ng-template>
            <ng-template #anolist2>
              <ng-container *ngIf="karama.emp_exist === 2">
              
              <td>{{ karama.cin }}</td>
              <td>{{ karama.nom_prenom }}</td>       
              <td>{{ karama.bur_cod }}</td>
              <td>{{ karama.date }}</td>
              <td>{{ karama.numero_affiliation }}</td>
              <td>{{ karama.type_contrat}}</td>
            </ng-container>
              </ng-template>  
      <!--   <ng-container *ngIf="karama.ass_exist !== 1 || karama.emp_exist !== 1; then update">
            </ng-container>
            <ng-template #update>
            <td> <a (click)="update(karama)" class="btn btn-info"> update </a> </td>
            </ng-template>  -->
            
          <!--  <td>
              <div *ngIf="karama.ass_exist !== 1 || karama.emp_exist !== 1" > 
              <button (click)="update(karama.numero_affiliation,karama.cin)" class="btn btn-info"> update </button>
              </div>
            </td> -->   
         </tr>   
      </tbody>   
    </table>
  </mat-drawer-container>
  </div>
  </div>  
  </div>
</div>
  </div> 
<!--     ******************-->
  <div class="navigation tablenav">  
    <ul>
        <li>
            <a (click)="listing()">
                <span class="icon"> <i class="fa fa-table" aria-hidden="true"></i> 
                </span>
                <span class="title"> LISTING</span>
              </a>
        </li>  
        <li>
            <a (click)="beneficiaire()">
                <span class="icon"> 
                </span>             
                <span class="title"> BENEFICIAIRE</span>
                <span class="badge ">3</span>
            </a>
        </li>    
        <li>
            <a (click)="anomalie()">
               <span class="icon">     
               </span>
               <span class="title">ANOMALIE</span>
            </a>
      </li>  
    </ul>
 
</div>
<!--<div class="toggle"  ></div>-->


   

       
